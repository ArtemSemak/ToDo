(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{143:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(22),c=n.n(s),r=(n(143),n(29)),i=n.n(r),u=n(52),l=n(28),d=(n(44),n(53)),j=n.n(d),p=(n.p,n(237)),h=n(234),b=n(54),m=n(238),O=n(6);var f=function(e){var t=e.todo,n=e.onChange,o=e.deleteTodo,s=e.editing,c=Object(a.useState)(!1),r=Object(l.a)(c,2),i=r[0],u=r[1],d=Object(a.useState)(t.name),j=Object(l.a)(d,2),f=j[0],g=j[1],x=["titleToDo"];return t.done&&x.push("done"),Object(O.jsxs)("section",{className:"td",children:[Object(O.jsxs)("section",{children:[Object(O.jsx)(p.a,{className:"checkBox",onChange:function(){return n(t.uuid,t.done,t.name)},checked:t.done}),i?Object(O.jsx)(h.a,{className:"inputForEdit",autoFocus:!0,onBlur:function(){return u(!1)},onPressEnter:function(e){return function(e){e.preventDefault(),f.trim()&&(s(t.uuid,f,t.done),u(!1))}(e)},onKeyDown:function(e){return function(e){"Escape"===e.key&&u(!1)}(e)},value:f,onChange:function(e){return g(e.target.value)}}):Object(O.jsx)("button",{onClick:function(){u(!0)},className:"qwe",children:Object(O.jsxs)("span",{className:x.join(" "),children:[" ",t.name," "]})})]}),Object(O.jsxs)("section",{children:[Object(O.jsxs)("label",{className:"lbltext",children:[" ",t.createdAt.slice(0,10)," "]}),Object(O.jsx)(b.a,{className:"trash",title:"Delete plan",onClick:function(){o(t.uuid),u(!1)},icon:Object(O.jsx)(m.a,{}),size:"small"})]})]})};var g=function(e){var t=e.sortedTodos,n=e.doneTodo,a=e.removeTodo,o=e.edit;return Object(O.jsx)("main",{className:"tds",children:t.length?t.map((function(e){return Object(O.jsx)(f,{editing:o,todo:e,onChange:n,deleteTodo:a})})):Object(O.jsx)("p",{className:"noTD",children:"You dont have ToDos"})})},x=n(232);var v=function(e){var t=e.todosLength,n=e.todosPerPage,a=e.pageClick;return Math.ceil(t/n)>1?Object(O.jsx)("section",{className:"footer",children:Object(O.jsx)(x.a,{onChange:function(e){return a(e)},defaultPageSize:n,defaultCurrent:1,total:t})}):Object(O.jsx)("span",{})},w=(n(126),h.a.Search);var S=function(e){var t=e.addTodo,n=Object(a.useState)(""),o=Object(l.a)(n,2),s=o[0],c=o[1];return Object(O.jsx)("section",{children:Object(O.jsx)(w,{onSearch:function(){t(s),c("")},autoFocus:!0,type:"text",value:s,onChange:function(e){return c(e.target.value)},enterButton:"Add",placeholder:"I want to do...",style:{width:560,height:40},title:"Write your plan here"})})},C=n(236);var y=function(e){var t=e.doneUndone,n=e.setDoneUnDone,a=e.setOrder,o=e.order;return Object(O.jsxs)("section",{className:"control",children:[Object(O.jsxs)(C.a.Group,{value:t,onChange:function(e){n(e.target.value)},children:[Object(O.jsx)(C.a.Button,{value:"all",children:"All"}),Object(O.jsx)(C.a.Button,{value:"done",children:"Done"}),Object(O.jsx)(C.a.Button,{value:"undone",children:"Undone"})]}),Object(O.jsxs)(C.a.Group,{value:o,onChange:function(e){a(e.target.value)},children:[Object(O.jsx)(C.a.Button,{value:"asc",children:"Asc"}),Object(O.jsx)(C.a.Button,{value:"desc",children:"Desc"})]})]})};var k=function(e){var t=e.visible,n=e.onClose,a=e.content;return t?Object(O.jsx)("div",{className:"modal-window",onClick:n,children:Object(O.jsxs)("div",{className:"modal-dialog",onClick:function(e){return e.stopPropagation()},children:[Object(O.jsx)("div",{className:"modal-header",children:Object(O.jsx)("h3",{className:"modal-title",children:"Oops!"})}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsx)("div",{className:"modal-content",children:a})})]})}):null},T=n(235),I=n(233);var P=function(e){var t=e.addUser,n=e.showRegistration,a=e.setShowRegistration,o=e.setShowLogin;return Object(O.jsx)(T.a,{title:"Sign up",visible:n,onCancel:function(){a(!1),o(!0)},footer:[],children:Object(O.jsxs)(I.a,{name:"basic",labelCol:{span:7},wrapperCol:{span:15},initialValues:{remember:!0},onFinish:function(e){t(e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(O.jsx)(I.a.Item,{label:"Login",name:"login",rules:[{required:!0,message:"Please input your username!"}],children:Object(O.jsx)(h.a,{})}),Object(O.jsx)(I.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(O.jsx)(h.a.Password,{})}),Object(O.jsx)(I.a.Item,{wrapperCol:{offset:9,span:16},children:Object(O.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Sign up"})})]})})};var N=function(e){var t=e.loginUser,n=e.showLogin,a=e.setShowLogin,o=e.setShowRegistration;return Object(O.jsx)(T.a,{title:"Log in",visible:n,closable:!1,footer:[],children:Object(O.jsxs)(I.a,{name:"basic",labelCol:{span:7},wrapperCol:{span:15},initialValues:{remember:!0},onFinish:function(e){t(e),console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(O.jsx)(I.a.Item,{label:"Login",name:"login",rules:[{required:!0,message:"Please input your username!"}],children:Object(O.jsx)(h.a,{})}),Object(O.jsx)(I.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(O.jsx)(h.a.Password,{})}),Object(O.jsx)(I.a.Item,{wrapperCol:{offset:9,span:16},children:Object(O.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Log in"})}),Object(O.jsx)(I.a.Item,{wrapperCol:{offset:18,span:16},children:Object(O.jsx)(b.a,{type:"link",onClick:function(){a(!1),o(!0)},children:"Sign up"})})]})})},D=(Object({NODE_ENV:"production",PUBLIC_URL:"/ToDo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_URL:"https://todo-api-artemsemak.herokuapp.com/api/todo"}).REACT_APP_ID,"https://todo-api-artemsemak.herokuapp.com/api/todo");var L=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(1),c=Object(l.a)(s,2),r=c[0],d=c[1],p=Object(a.useState)("all"),h=Object(l.a)(p,2),m=h[0],f=h[1],x=Object(a.useState)("desc"),w=Object(l.a)(x,2),C=w[0],T=w[1],I=Object(a.useState)(!1),L=Object(l.a)(I,2),F=L[0],E=L[1],R=Object(a.useState)(""),_=Object(l.a)(R,2),B=_[0],U=_[1],A=Object(a.useState)(!1),q=Object(l.a)(A,2),K=q[0],W=q[1],H=Object(a.useState)(!1),V=Object(l.a)(H,2),z=V[0],G=V[1],J=Object(a.useState)(!0),M=Object(l.a)(J,2),Y=M[0],Q=M[1],X=n.slice(5*r-5,5*r),Z={headers:{"x-auth":sessionStorage.getItem("jwt")}};function $(){return($=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(n.filter((function(e){return e.uuid!==t}))),console.log(t),console.log(n),e.next=6,j.a.delete("".concat(D,"/").concat(t,"/").concat(sessionStorage.getItem("user")),Z);case 6:X.length-1===0&&1!=r&&d(r-1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),U(e.t0.response.data.message),E(!0),setTimeout((function(){return E(!1)}),3e3);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ee(){return(ee=Object(u.a)(i.a.mark((function e(t,a,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.put("".concat(D,"/").concat(t,"/").concat(sessionStorage.getItem("user")),{name:s,done:!a},Z);case 3:o(n.map((function(e){return e.uuid===t&&(e.done=!e.done),e}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function te(){return(te=Object(u.a)(i.a.mark((function e(t,a,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.put("".concat(D,"/").concat(t,"/").concat(sessionStorage.getItem("user")),{name:a,done:s},Z);case 3:o(n.map((function(e){return e.uuid===t&&(e.name=a),e}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ne(){return(ne=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("https://todo-api-artemsemak.herokuapp.com/registration",t);case 3:n=e.sent,console.log(n),G(!0),W(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),U("This user already exists"),E(!0),setTimeout((function(){return E(!1)}),3e3);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ae(){return(ae=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("https://todo-api-artemsemak.herokuapp.com/login",t);case 3:n=e.sent,sessionStorage.setItem("jwt",n.data),sessionStorage.setItem("user",t.login),Q(!0),G(!1),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),U("Incorrect password or login"),E(!0),setTimeout((function(){return E(!1)}),3e3);case 16:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function oe(){return(oe=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(""),e.next=4,j.a.post("".concat(D,"/").concat(sessionStorage.getItem("user")),{name:t,done:!1},Z);case 4:d(1),f("all"),se(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),U(e.t0.response.data.message),E(!0),setTimeout((function(){return E(!1)}),3e3);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function se(){return ce.apply(this,arguments)}function ce(){return(ce=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(Y),console.log(sessionStorage.getItem("user")),e.next=5,j.a.get("".concat(D,"s/").concat(sessionStorage.getItem("user"),"?order=").concat(C,"&filterBy=").concat(m),Z);case 5:t=e.sent,o(t.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){sessionStorage.getItem("user")||(Q(!1),G(!0))}),[]),Object(a.useEffect)((function(){d(1),se()}),[m,C,Y]),Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)("body",{children:[Object(O.jsxs)("header",{children:[Object(O.jsx)("section",{children:Object(O.jsx)("p",{className:"title",children:"ToDo"})}),Object(O.jsx)(S,{addTodo:function(e){return oe.apply(this,arguments)}}),Object(O.jsx)(y,{doneUndone:m,setDoneUnDone:f,setOrder:T,order:C})]}),Object(O.jsx)(g,{edit:function(e,t,n){return te.apply(this,arguments)},sortedTodos:X,doneTodo:function(e,t,n){return ee.apply(this,arguments)},removeTodo:function(e){return $.apply(this,arguments)}}),Object(O.jsxs)("footer",{className:"mainfooter",children:[Object(O.jsx)(v,{todosLength:n.length,todosPerPage:5,pageClick:function(e){d(e)}}),Object(O.jsx)(b.a,{onClick:function(){sessionStorage.removeItem("jwt"),sessionStorage.removeItem("user"),o([]),Q(!1),G(!0)},className:"logout",children:"Log out"})]}),Object(O.jsx)(k,{visible:F,onClose:function(){E(!1)},content:B}),Object(O.jsx)(P,{addUser:function(e){return ne.apply(this,arguments)},showRegistration:K,setShowRegistration:W,setShowLogin:G}),Object(O.jsx)(N,{loginUser:function(e){return ae.apply(this,arguments)},showLogin:z,setShowLogin:G,setShowRegistration:W})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(L,{})}),document.getElementById("root")),F()},44:function(e,t,n){}},[[230,1,2]]]);
//# sourceMappingURL=main.159abca8.chunk.js.map